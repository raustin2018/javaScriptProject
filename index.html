<!DOCTYPE HTML>
<html>

	<head>
	
	<title>Zombie Game</title>
	<link rel="icon" href="favicon.png">


	</head>


	<style>

		body{
			background-color: black;
		}
		
		#gameCanvas{
			border: 5px white solid;
			position: fixed;
		}

		img.logo2{
			position: relative;
			width: 12%;
			height: 12%;
			margin-top: 5%;
			margin-left: 80%;
			opacity: 1.0;

		}
		img.logo1{
			position: relative;
			width: 23%;
			height: 7%;
			margin-left: 74.5%;
			opacity: 1.0;

		}

	</style>

	<body onload="draw">

		<canvas id="gameCanvas" width=1000 height=700> </canvas>

		<img src="zombielogo2.png" class="logo2">  

		<img src="zombielogo.png" class="logo1">

		<script>
			var canvas = document.getElementById("gameCanvas"),
    		ctx = canvas.getContext("2d");

			(function() {
  				var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
    			window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  				window.requestAnimationFrame = requestAnimationFrame;
			})();

			window.addEventListener("keydown", onKeyDown, false);
			window.addEventListener("keyup", onKeyUp, false);

			function onKeyDown(event) {
  				var keyCode = event.keyCode;
  				switch (keyCode) {
    				case 83: keyS = true;
      				break;
    				case 87: keyW = true;
    				break;
    				case 32: keySpace = true;
    				break;
  				}
			}

			function onKeyUp(event) {
  				var keyCode = event.keyCode;
  				switch (keyCode) {
    				case 83: keyS = false;
      				break;
    				case 87: keyW = false;
      				break;
      				case 32: keySpace = false;
      				break;
  				}
			}		
			
			var tickY = 10;

			var keyW = false;
			var keyS = false;
			var keySpace = false;

			var background = new Image();
			background.src = "background.jpeg";
			
			//var background = document.getElementById("bg");
			var house = new Image();
			house.src = "farm_house_sprite.png";

			var fence = new Image();
			fence.src = "realFence.png";

			var zombie = new Image();
			zombie.src = "zombie.png";

			var survivor = new Image();
			survivor.src = "survivor.png";

			var bigZomb = new Image();
			bigZomb.src = "zombimeme.png";

			var bullets = new Image();
			bullets.src = "bullet.png";
  
			var zx= 1100;

			function fatZombie(){

				this.x=1100;
				this.y=Math.random() *535;
				this.draw=function (ctx){
					this.x-=.5;
					ctx.drawImage(bigZomb,this.x, this.y,102,86);
				}
			}

			function Zombie(){
				
				
				this.x=1100;
				this.y = Math.random() *535;
				this.draw = function (ctx){
					this.x--;
					ctx.drawImage(zombie , this.x , this.y, 50, 45);

				}
			}

			function bullet(){
				
				this.x = 250;
				this.y = tickY+33;
				this.draw = function(ctx){
					this.x += 4;
					ctx.drawImage(bullets, this.x, this.y, 20, 10);
				}

			}
			
			setInterval(draw, 10);
			setInterval(spawnZombie, 1000);
			setInterval(spawnFatZombie,5000);
			setInterval(spawnBullet, 500);			

			var zombies = [];
			var fatzombie = [];
			var bulletss = [];
			var fenceHits = 3;
			var gameOn = true;

			function zombieWallCollision(){
				for( var z of zombies){
					if(z.x<270 && z.x>250 && fenceHits > 0){
						z.x = -100;
						fenceHits--;
					}

					
				}
			}
			function fatZombieWallCollision(){
				for( var z of fatzombie){
					if(z.x<270 && z.x>250 && fenceHits > 0){
						z.x = -100;
						fenceHits--;
					}

					
				}
			}
			function spawnZombie(){
				zombies.push(new Zombie()); 
			}

			function spawnFatZombie(){
				fatzombie.push(new fatZombie());
			}

			function spawnBullet(){
				if(keySpace == true){
					bulletss.push(new bullet());
				}

			}


			function update(){
				

				

			}

			function draw(){
				zombieWallCollision();
				fatZombieWallCollision()
				console.log(fenceHits);
				if(tickY < -20){
					tickY = 730;
				}
				if(tickY > 731){
					tickY = -15;
				}
				if (keyS == true) {
	   				tickY += 5;
	 			}
	  			if (keyW == true) {
	    			tickY -= 5;
	  			}

    			ctx.drawImage(background,0,0);
    			if (fenceHits>0) {
    				ctx.drawImage(fence, 270,0,15,701);

    			}
    			if (fenceHits<= 0) {
    				gameOn = false;
    			}

    			if (fenceHits ==3 ) {
    				ctx.beginPath();
    				ctx.fillStyle = "Green";
    				ctx.lineWidth = "10";
    				ctx.rect(230,20,100,25);
    				ctx.fill();
    			}
    			if (fenceHits ==2 ) {
    				ctx.beginPath();
    				ctx.fillStyle = "Orange";
    				ctx.lineWidth = "10";
    				ctx.rect(230,20,100,25);
    				ctx.fill();
    			}
    			if (fenceHits ==1 ) {
    				ctx.beginPath();
    				ctx.fillStyle = "Red";
    				ctx.lineWidth = "10";
    				ctx.rect(230,20,100,25);
    				ctx.fill();
    			}


    			ctx.drawImage(house, 0, 40, 150, 600); 
    			ctx.drawImage(survivor, 230, tickY, 50, 50);


    			var Zlen = zombies.length;
    			var zlen = fatzombie.length;
    			var blen = bulletss.length;

    			for (var meme = 0; meme < zlen ; meme++) {

    				fatzombie [meme].draw(ctx);
					
				}


    			for (var i = 0; i < Zlen ; i++) {

    				zombies [i].draw(ctx);
					
				}

				for (var x = 0; x < blen; x++) {

					bulletss [x].draw(ctx);
				}
    		}



		</script>

	</body>

</html>
